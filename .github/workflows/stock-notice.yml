name: 司法拍卖公告推送

on:
  schedule:
    # 设置三个执行时间点（UTC时间），对应北京时间6:15、6:30、7:00
    - cron: '15 22 * * *'  # 北京时间6:15 (UTC 22:15)
    - cron: '30 22 * * *'  # 北京时间6:30 (UTC 22:30)  
    - cron: '0 23 * * *'   # 北京时间7:00 (UTC 23:00)
  workflow_dispatch:  # 允许手动触发

jobs:
  send-notice:
    runs-on: ubuntu-latest
    timeout-minutes: 10

    steps:
    - name: 检出代码
      uses: actions/checkout@v4

    - name: 设置Python环境
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'

    - name: 安装依赖
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    - name: 执行推送脚本
      run: |
        python stock_notice_bot.py
